<script src="/libs/datatables-1.10.4/media/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="/libs/datatables-1.10.4/extensions/Scroller/js/dataTables.scroller.js" type="text/javascript"></script>

<% if flash[:notice] %>
    <div class="notice"><%= flash[:notice] %></div>
<% end %>

<% if flash[:error] %>
    <div class="error"><%= flash[:error] %></div>
<% end %>

<div class="table_white">
  <table id="events" class="table table-striped table-bordered table-condensed width_100" cellpadding="0" cellspacing="0" border="0">
    <thead>
    <tr>
      <th class="align_left align_top l_padding_20">事件通知名称</th>
      <th class="align_left align_top">事件通知类型</th>
      <th class="align_left align_top">群组</th>
      <th class="align_left align_top">人员</th>
      <th class="align_left align_top">通知方式</th>
    </tr>
    </thead>
    <tbody>
    <% @events.each do |event| %>
        <tr class="<%= cycle("even", "") %>">
          <td class="underlined"><a href="/events/<%= event.id %>"><%= event.name %></a></td>
          <td><%= h event.event_type  %></td>
          <td><%= h event.groups.map(&:name).join(",") %></td>
          <td><%= h event.users.map(&:username).join(",") %></td>
          <% if event.notify_type=="relative" %>
              <td><%= h "相对通知" %></td>
          <% elsif event.notify_type=="absolute" %>
              <td><%= h "绝对通知" %></td>
          <% end %>
        </tr>
    <% end %>
    </tbody>
  </table>
</div>

<br>



<script type="text/javascript">
    var oTable = $("#events").dataTable({
        "oLanguage": {"sUrl": "/javascripts/i18n/dataTables-new.zh-cn.txt"},
        "sDom": "<'row'<'pull-left'f>>t<'row table_bottom'<'table_pagin'p><'table_info'i>>",
        "sPaginationType": "full_numbers",
        "bPaginate": true,
        "iDisplayLength": 15,
        "bLengthChange": false,
        "bAutoWidth": false,
        "aaSorting": [],
        "fnInitComplete": function () {
        }
    });
</script>
