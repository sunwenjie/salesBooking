function donut_chart(f,b,e,c){if(null==e)window.console&&console.log("selector fail");else if(null==c)window.console&&console.log("data invalidate or null");else{var g=f||400,h=b||400,b=Math.min(g,h)/2.5,i=b+10,j=b-Math.max(g,h)/5;d3.scale.category20();var f=d3.layout.pie(),k=d3.svg.arc().innerRadius(0.95*b).outerRadius(b);arc_inner=d3.svg.arc().innerRadius(0.7*b).outerRadius(0.87*b);e=d3.select(e).append("svg:svg").data([c]).attr("width",g).attr("height",h).append("svg:g");c=e.selectAll("g.arc.outer").data(f.value(function(a){return"outer"==
a.group?a.val:0})).enter().append("svg:g").attr("class","arc outer").attr("transform","translate("+(b+40)+","+(b+40)+")");c.append("svg:path").attr("class",function(a){return a.data.type}).attr("d",k);c.append("svg:text").attr("transform",function(a){var d=k.centroid(a),a=d[0],d=d[1],b=Math.sqrt(a*a+d*d);return"translate("+a/b*i+","+d/b*i+")"}).attr("dy",".35em").attr("class",function(a){return"text "+a.data.type}).attr("text-anchor",function(a){return(a.endAngle+a.startAngle)/2>Math.PI?"end":"start"}).text(function(a){return"outer"==
a.data.group&&0!=a.value?a.value+"%":""});c=e.selectAll("g.arc.inner").data(f.value(function(a){return"inner"==a.group?a.val:0})).enter().append("svg:g").attr("class","arc inner").attr("transform","translate("+(b+40)+","+(b+40)+")");c.append("svg:path").attr("class",function(a){return a.data.type}).attr("d",arc_inner);c.append("svg:text").attr("transform",function(a){var b=arc_inner.centroid(a),a=b[0],b=b[1],c=Math.sqrt(a*a+b*b);return"translate("+a/c*j+","+b/c*j+")"}).attr("dy",".35em").attr("class",
function(a){return"text "+a.data.type}).attr("text-anchor",function(){return"middle"}).text(function(a){return"inner"==a.data.group&&0!=a.value?a.value+"%":""})}};